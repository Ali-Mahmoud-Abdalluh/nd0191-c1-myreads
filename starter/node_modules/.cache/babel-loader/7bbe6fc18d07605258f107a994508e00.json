{"ast":null,"code":"import _slicedToArray from\"/home/kali/Documents/reactProject/nd0191-c1-myreads/starter/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState}from\"react\";import*as BooksAPI from\"../BooksAPI.js\";import{Link}from\"react-router-dom\";import Book from\"./Book\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var SearchPage=function SearchPage(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),searchRes=_useState2[0],setSearchRes=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),myBooks=_useState4[0],setMyBooks=_useState4[1];function searchHandler(event){if(event.target.value.trim()!==\"\"){BooksAPI.search(event.target.value.trim()).then(function(res){var allRes=[];Array.isArray(res)&&event.target.value.trim().length>0?allRes=res:setSearchRes([]);updateSearch();var filteredRes=allRes.filter(function(value){return\"imageLinks\"in value!==false&&\"authors\"in value!==false;});setSearchRes(filteredRes.length>0?filteredRes:[]);}).catch(function(error){return console.log(error);});}else{setSearchRes([]);}}function updateSearch(){BooksAPI.getAll().then(function(allBooks){setMyBooks(allBooks);}).catch(function(error){return console.log(error);});}return/*#__PURE__*/_jsx(\"div\",{className:\"app\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"search-books\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"search-books-bar\",children:[/*#__PURE__*/_jsx(Link,{to:\"/\",className:\"close-search\",children:\"Close\"}),/*#__PURE__*/_jsx(\"div\",{className:\"search-books-input-wrapper\",children:/*#__PURE__*/_jsx(\"input\",{onChange:searchHandler,type:\"text\",placeholder:\"Search by title, author, or ISBN\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"search-books-results\",children:/*#__PURE__*/_jsx(\"ol\",{className:\"books-grid\",children:searchRes.map(function(book){return/*#__PURE__*/_jsx(Book,{book:book,updateScreen:updateSearch,myBooks:myBooks},book.id);})})})]})});};export default SearchPage;","map":{"version":3,"names":["useState","BooksAPI","Link","Book","SearchPage","searchRes","setSearchRes","myBooks","setMyBooks","searchHandler","event","target","value","trim","search","then","res","allRes","Array","isArray","length","updateSearch","filteredRes","filter","catch","error","console","log","getAll","allBooks","map","book","id"],"sources":["/home/kali/Documents/reactProject/nd0191-c1-myreads/starter/src/components/SearchPage.js"],"sourcesContent":["import { useState } from \"react\";\nimport * as BooksAPI from \"../BooksAPI.js\";\nimport { Link } from \"react-router-dom\";\nimport Book from \"./Book\";\n\nconst SearchPage = () => {\n\n\n  const [searchRes, setSearchRes] = useState([]);\n  const [myBooks, setMyBooks] = useState([]);\n\n  function searchHandler(event) {\n    if (event.target.value.trim() !== \"\") {\n      BooksAPI.search(event.target.value.trim())\n        .then((res) => {\n          let allRes = [];\n\n          Array.isArray(res)&&event.target.value.trim().length > 0 ? allRes = res : setSearchRes([]);\n          \n          updateSearch();\n\n          let filteredRes = allRes.filter((value) => \"imageLinks\" in value !== false && \"authors\" in value !== false);\n          setSearchRes(filteredRes.length > 0 ? filteredRes : [])\n        })\n        .catch((error) => console.log(error));\n    }else{\n        setSearchRes([]);\n    }\n  }\n\n\n\n  function updateSearch() {\n    BooksAPI.getAll()\n      .then((allBooks) => {\n        setMyBooks(allBooks);\n      })\n      .catch((error) => console.log(error));\n  }\n\n\n\n  return (\n    <div className=\"app\">\n      <div className=\"search-books\">\n        <div className=\"search-books-bar\">\n          <Link to=\"/\" className=\"close-search\">\n            Close\n          </Link>\n          <div className=\"search-books-input-wrapper\">\n            <input\n              onChange={searchHandler}\n              type=\"text\"\n              placeholder=\"Search by title, author, or ISBN\"\n            />\n          </div>\n        </div>\n        <div className=\"search-books-results\">\n          <ol className=\"books-grid\">\n            {searchRes.map((book) => (\n              <Book key={book.id} book={book} updateScreen={updateSearch} myBooks={myBooks} />\n            ))}\n          </ol>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default SearchPage;\n"],"mappings":"iJAAA,OAASA,QAAT,KAAyB,OAAzB,CACA,MAAO,GAAKC,SAAZ,KAA0B,gBAA1B,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,MAAOC,KAAP,KAAiB,QAAjB,C,wFAEA,GAAMC,WAAU,CAAG,QAAbA,WAAa,EAAM,CAGvB,cAAkCJ,QAAQ,CAAC,EAAD,CAA1C,wCAAOK,SAAP,eAAkBC,YAAlB,eACA,eAA8BN,QAAQ,CAAC,EAAD,CAAtC,yCAAOO,OAAP,eAAgBC,UAAhB,eAEA,QAASC,cAAT,CAAuBC,KAAvB,CAA8B,CAC5B,GAAIA,KAAK,CAACC,MAAN,CAAaC,KAAb,CAAmBC,IAAnB,KAA8B,EAAlC,CAAsC,CACpCZ,QAAQ,CAACa,MAAT,CAAgBJ,KAAK,CAACC,MAAN,CAAaC,KAAb,CAAmBC,IAAnB,EAAhB,EACGE,IADH,CACQ,SAACC,GAAD,CAAS,CACb,GAAIC,OAAM,CAAG,EAAb,CAEAC,KAAK,CAACC,OAAN,CAAcH,GAAd,GAAoBN,KAAK,CAACC,MAAN,CAAaC,KAAb,CAAmBC,IAAnB,GAA0BO,MAA1B,CAAmC,CAAvD,CAA2DH,MAAM,CAAGD,GAApE,CAA0EV,YAAY,CAAC,EAAD,CAAtF,CAEAe,YAAY,GAEZ,GAAIC,YAAW,CAAGL,MAAM,CAACM,MAAP,CAAc,SAACX,KAAD,QAAW,cAAgBA,MAAhB,GAA0B,KAA1B,EAAmC,WAAaA,MAAb,GAAuB,KAArE,EAAd,CAAlB,CACAN,YAAY,CAACgB,WAAW,CAACF,MAAZ,CAAqB,CAArB,CAAyBE,WAAzB,CAAuC,EAAxC,CAAZ,CACD,CAVH,EAWGE,KAXH,CAWS,SAACC,KAAD,QAAWC,QAAO,CAACC,GAAR,CAAYF,KAAZ,CAAX,EAXT,EAYD,CAbD,IAaK,CACDnB,YAAY,CAAC,EAAD,CAAZ,CACH,CACF,CAID,QAASe,aAAT,EAAwB,CACtBpB,QAAQ,CAAC2B,MAAT,GACGb,IADH,CACQ,SAACc,QAAD,CAAc,CAClBrB,UAAU,CAACqB,QAAD,CAAV,CACD,CAHH,EAIGL,KAJH,CAIS,SAACC,KAAD,QAAWC,QAAO,CAACC,GAAR,CAAYF,KAAZ,CAAX,EAJT,EAKD,CAID,mBACE,YAAK,SAAS,CAAC,KAAf,uBACE,aAAK,SAAS,CAAC,cAAf,wBACE,aAAK,SAAS,CAAC,kBAAf,wBACE,KAAC,IAAD,EAAM,EAAE,CAAC,GAAT,CAAa,SAAS,CAAC,cAAvB,mBADF,cAIE,YAAK,SAAS,CAAC,4BAAf,uBACE,cACE,QAAQ,CAAEhB,aADZ,CAEE,IAAI,CAAC,MAFP,CAGE,WAAW,CAAC,kCAHd,EADF,EAJF,GADF,cAaE,YAAK,SAAS,CAAC,sBAAf,uBACE,WAAI,SAAS,CAAC,YAAd,UACGJ,SAAS,CAACyB,GAAV,CAAc,SAACC,IAAD,qBACb,KAAC,IAAD,EAAoB,IAAI,CAAEA,IAA1B,CAAgC,YAAY,CAAEV,YAA9C,CAA4D,OAAO,CAAEd,OAArE,EAAWwB,IAAI,CAACC,EAAhB,CADa,EAAd,CADH,EADF,EAbF,GADF,EADF,CAyBD,CA9DD,CAgEA,cAAe5B,WAAf"},"metadata":{},"sourceType":"module"}